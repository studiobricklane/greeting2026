<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winter Greetings 2026 | Studio Brick Lane</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400&family=Shippori+Mincho:wght@400;500&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --c-bg: #050810;
            --c-aurora-1: #00ff9d;
            --c-aurora-2: #00d2ff;
            --c-aurora-3: #4a00e0;
            --c-text: #FFFFFF;
        }

        /* --- Global Reset & Viewport Lock --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }

        html, body {
            width: 100%;
            overflow-x: hidden; /* Prevent horizontal scroll on all devices */
        }

        body {
            background: linear-gradient(180deg, #050810 0%, #0b1021 100%);
            color: var(--c-text);
            font-family: 'Shippori Mincho', serif;
            min-height: 100vh;
            -webkit-font-smoothing: antialiased;
        }

        /* --- Background Layers (Fixed) --- */
        .bg-container {
            position: fixed; 
            top: 0; left: 0; width: 100vw; 
            height: 100vh; 
            height: 100dvh; 
            z-index: -2; overflow: hidden;
            background-size: cover;
            transform: scale(1.1);
            pointer-events: none;
        }

        .aurora-blob {
            position: absolute; border-radius: 50%;
            filter: blur(120px); opacity: 0.6;
            will-change: transform;
        }

        /* PC Default Positions */
        .blob-1 {
            width: 80vw; height: 80vw;
            background: radial-gradient(circle, var(--c-aurora-1) 0%, transparent 70%);
            top: -20%; left: -10%; animation: breathe 14s infinite alternate ease-in-out;
        }

        .blob-2 {
            width: 90vw; height: 90vw;
            background: radial-gradient(circle, var(--c-aurora-2) 0%, transparent 70%);
            top: -30%; right: -20%; animation: breathe 18s infinite alternate ease-in-out;
            mix-blend-mode: screen;
        }

        .blob-3 {
            width: 100vw; height: 60vw;
            background: radial-gradient(circle, var(--c-aurora-3) 0%, transparent 80%);
            bottom: -20%; left: 10%; opacity: 0.4;
            animation: breathe 20s infinite alternate ease-in-out;
        }

        @keyframes breathe {
            0% { transform: scale(1); opacity: 0.5; }
            100% { transform: scale(1.1); opacity: 0.7; }
        }

        /* --- Mobile Background Fixes --- */
        @media (max-width: 768px) {
            .aurora-blob { filter: blur(80px); }
            .blob-1 { width: 150vw; height: 150vw; top: -20%; left: -50%; }
            .blob-2 { width: 160vw; height: 160vw; top: 30%; right: -60%; }
            .blob-3 { width: 180vw; height: 150vw; bottom: -20%; left: -40%; opacity: 0.5; }
        }

        /* Noise Texture */
        .noise-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: -1; opacity: 0.07;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        }

        /* --- Snow Canvas (2D) --- */
        #snow-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; pointer-events: none;
        }

        /* --- Content Layout --- */
        main { position: relative; z-index: 10; width: 100%; }

        section {
            height: 100vh; width: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            text-align: center; position: relative; padding: 2rem;
        }

        .anim-target { opacity: 0; transform: translateY(30px); }

        /* Typography - PC Default */
        .hero-title {
            font-family: 'Montserrat', sans-serif; font-weight: 300;
            font-size: clamp(2rem, 6vw, 5rem); 
            letter-spacing: 0.2em;
            margin-bottom: 1.5rem; text-shadow: 0 0 30px rgba(255,255,255,0.4);
            white-space: nowrap; 
        }
        
        .hero-subtitle {
            font-family: 'Montserrat', sans-serif; font-size: clamp(1rem, 2vw, 1.5rem);
            letter-spacing: 0.3em; opacity: 0.9;
        }

        .scroll-indicator {
            position: absolute; bottom: 5vh; left: 50%; transform: translateX(-50%);
            display: flex; flex-direction: column; align-items: center; gap: 15px; opacity: 0;
        }
        .scroll-text { font-family: 'Montserrat', sans-serif; font-size: 0.7rem; letter-spacing: 0.3em; }
        .scroll-arrow {
            width: 1px; height: 50px; background: linear-gradient(to bottom, #fff, transparent); position: relative;
        }
        .scroll-arrow::after {
            content: ''; position: absolute; top: 0; left: -3px; width: 7px; height: 7px;
            border-bottom: 1px solid #fff; border-right: 1px solid #fff; transform: rotate(45deg);
        }

        .message-container { max-width: 800px; width: 100%; }
        
        .message-text {
            font-size: clamp(1rem, 1.8vw, 1.3rem); line-height: 2.8; letter-spacing: 0.15em;
            font-weight: 500; text-shadow: 0 2px 10px rgba(0,0,0,0.5);
            text-align: center; 
        }
        .message-lead { display: block; font-size: 1.2em; margin-bottom: 3rem; }

        .closing-text {
            font-family: 'Montserrat', sans-serif; font-size: clamp(1.2rem, 2.5vw, 2rem);
            letter-spacing: 0.2em; margin-bottom: 1rem;
        }
        
        a.closing-sub {
            font-size: 0.9rem; letter-spacing: 0.1em; opacity: 0.8;
            color: inherit; text-decoration: none;
            transition: opacity 0.3s ease;
            display: inline-block;
        }
        a.closing-sub:hover { opacity: 1.0; text-decoration: underline; }

        /* --- Mobile Overrides (Strict Fixes) --- */
        @media (max-width: 768px) {
            /* 1. Reset Section Padding */
            section {
                padding: 0 !important;
                width: 100% !important;
            }

            /* 2. Strict Container Protection */
            .message-container {
                width: 90% !important; /* Force 90% width */
                max-width: 90% !important;
                margin: 0 auto !important; /* Force center with margin */
                padding: 0 !important;
            }

            /* 3. Strict Typography & Break Rules */
            .message-text {
                font-size: 14px !important; /* Fixed size */
                line-height: 1.8 !important; /* Relaxed line height */
                text-align: center !important;
                display: block !important;
                width: 100% !important;
                
                word-break: keep-all !important; /* No mid-word breaks */
                overflow-wrap: break-word !important;
            }

            .message-lead {
                font-size: 1.1em;
                margin-bottom: 1.5rem;
                display: inline-block;
            }

            /* 4. Title Centering */
            .hero-title {
                font-size: 7vw;
                letter-spacing: 0.2em;
                white-space: normal;
                line-height: 1.4;
                width: 90% !important;
                margin: 0 auto 1.5rem auto !important;
                text-align: center !important;
            }
            
            /* Closing Centering */
            #section-closing .anim-target {
                width: 90% !important;
                margin: 0 auto !important;
                text-align: center !important;
            }
        }
    </style>
</head>
<body>

    <!-- Background Layers -->
    <div class="bg-container" id="bg-aurora">
        <div class="aurora-blob blob-1"></div>
        <div class="aurora-blob blob-2"></div>
        <div class="aurora-blob blob-3"></div>
    </div>
    <div class="noise-overlay"></div>
    
    <!-- Canvas for 2D Snow -->
    <canvas id="snow-canvas"></canvas>

    <main>
        <!-- Hero Section -->
        <section id="section-hero">
            <div class="anim-target">
                <h1 class="hero-title">WINTER GREETINGS<br>2026</h1>
                <p class="hero-subtitle">Studio Brick Lane</p>
            </div>
            <div class="scroll-indicator anim-target-scroll">
                <span class="scroll-text">SCROLL</span>
                <div class="scroll-arrow"></div>
            </div>
        </section>

        <!-- Message Section -->
        <section id="section-message">
            <div class="message-container">
                <p class="message-text anim-target">
                    <span class="message-lead">喪中につき年頭のご挨拶を失礼させていただきます</span>
                    本年中に賜りましたご厚情に深謝いたしますとともに<br>
                    明年も変わらぬご交誼のほどお願い申し上げます<br>
                    <br>
                    寒さ厳しき折柄<br>
                    皆様におかれましては<br>
                    どうぞご自愛くださいませ
                </p>
            </div>
        </section>

        <!-- Closing Section -->
        <section id="section-closing">
            <div class="anim-target">
                <p class="closing-text">Studio Brick Lane</p>
                <a href="https://www.studio-bricklane.com" target="_blank" rel="noopener" class="closing-sub">https://www.studio-bricklane.com</a>
            </div>
        </section>
    </main>

    <script>
        // --- 1. Canvas 2D Snow System ---
        const initSnowSystem = () => {
            const canvas = document.getElementById('snow-canvas');
            const ctx = canvas.getContext('2d');
            
            let width, height;
            let particles = [];
            
            // Interaction state
            const interaction = { x: -1000, y: -1000, vx: 0, vy: 0, prevX: 0, prevY: 0 };
            
            // Configuration
            const isMobile = window.innerWidth < 768;
            const PARTICLE_COUNT = isMobile ? 80 : 180; 
            const LAYERS = 3; 

            // Resize
            const resize = () => {
                width = window.innerWidth;
                height = window.innerHeight;
                canvas.width = width;
                canvas.height = height;
            };
            window.addEventListener('resize', resize);
            resize();

            // --- Interaction Handlers ---
            const handleMove = (x, y) => {
                interaction.x = x;
                interaction.y = y;
                interaction.vx = x - interaction.prevX;
                interaction.vy = y - interaction.prevY;
                interaction.prevX = x;
                interaction.prevY = y;
            };

            window.addEventListener('mousemove', (e) => {
                handleMove(e.clientX, e.clientY);
            });

            window.addEventListener('touchmove', (e) => {
                const touch = e.touches[0];
                handleMove(touch.clientX, touch.clientY);
            }, { passive: true });

            window.addEventListener('touchstart', (e) => {
                const touch = e.touches[0];
                interaction.prevX = touch.clientX;
                interaction.prevY = touch.clientY;
                handleMove(touch.clientX, touch.clientY);
            }, { passive: true });

            // Particle Class
            class Particle {
                constructor() {
                    this.init();
                }

                init(randomY = true) {
                    this.x = Math.random() * width;
                    this.y = randomY ? Math.random() * height : -10;
                    this.layer = Math.floor(Math.random() * LAYERS);
                    
                    if (this.layer === 0) { // Back
                        this.size = Math.random() * 1.5 + 0.5;
                        this.speedY = Math.random() * 0.3 + 0.2;
                        this.alpha = Math.random() * 0.3 + 0.1;
                        this.parallaxFactor = 0.1;
                    } else if (this.layer === 1) { // Mid
                        this.size = Math.random() * 2 + 1;
                        this.speedY = Math.random() * 0.6 + 0.4;
                        this.alpha = Math.random() * 0.4 + 0.2;
                        this.parallaxFactor = 0.3;
                    } else { // Front
                        this.size = Math.random() * 3 + 2;
                        this.speedY = Math.random() * 1.0 + 0.8;
                        this.alpha = Math.random() * 0.5 + 0.4;
                        this.parallaxFactor = 0.6;
                    }

                    this.vx = (Math.random() - 0.5) * 0.5;
                    this.vy = this.speedY;
                    
                    this.originalVx = this.vx;
                    this.originalVy = this.vy;
                }

                update(scrollY) {
                    this.x += this.vx;
                    this.y += this.vy;

                    // Soft Interaction
                    const dx = this.x - interaction.x;
                    const dy = this.y - interaction.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    const influenceRadius = 200; 

                    if (dist < influenceRadius) {
                        const force = (influenceRadius - dist) / influenceRadius;
                        const angle = Math.atan2(dy, dx);
                        
                        const pushX = Math.cos(angle) * force * 0.08;
                        const pushY = Math.sin(angle) * force * 0.08;
                        const dragX = interaction.vx * force * 0.005;
                        const dragY = interaction.vy * force * 0.005;

                        this.vx += pushX + dragX;
                        this.vy += pushY + dragY;
                    }

                    this.vx += (this.originalVx - this.vx) * 0.015;
                    this.vy += (this.originalVy - this.vy) * 0.015;

                    let renderY = this.y - (scrollY * this.parallaxFactor);

                    if (renderY > height + 10) {
                        this.y = scrollY * this.parallaxFactor - 10; 
                        this.x = Math.random() * width;
                        this.vx = this.originalVx;
                        this.vy = this.originalVy;
                    }
                    
                    if (this.x > width + 10) this.x = -10;
                    if (this.x < -10) this.x = width + 10;

                    return renderY;
                }

                draw(ctx, renderY) {
                    ctx.beginPath();
                    ctx.arc(this.x, renderY, this.size, 0, Math.PI * 2);
                    
                    if (this.layer === 2) {
                        const grad = ctx.createRadialGradient(this.x, renderY, 0, this.x, renderY, this.size * 2);
                        grad.addColorStop(0, `rgba(255, 255, 255, ${this.alpha})`);
                        grad.addColorStop(1, `rgba(255, 255, 255, 0)`);
                        ctx.fillStyle = grad;
                    } else {
                        ctx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`;
                    }
                    ctx.fill();
                }
            }

            for (let i = 0; i < PARTICLE_COUNT; i++) {
                particles.push(new Particle());
            }

            const animate = () => {
                ctx.clearRect(0, 0, width, height);
                ctx.globalCompositeOperation = 'lighter';
                
                const scrollY = window.scrollY;

                particles.forEach(p => {
                    const renderY = p.update(scrollY);
                    if (renderY > -50 && renderY < height + 50) {
                        p.draw(ctx, renderY);
                    }
                });

                ctx.globalCompositeOperation = 'source-over';
                interaction.vx *= 0.9;
                interaction.vy *= 0.9;

                requestAnimationFrame(animate);
            };

            animate();
        };

        // --- 2. GSAP Animations ---
        const initGSAP = () => {
            gsap.registerPlugin(ScrollTrigger);

            gsap.to("#section-hero .anim-target", { opacity: 1, y: 0, duration: 2, ease: "power3.out", delay: 0.5 });
            gsap.to(".scroll-indicator", { opacity: 0.7, duration: 1, delay: 1.5 });
            gsap.to(".scroll-arrow", { y: 10, repeat: -1, yoyo: true, duration: 1.5, ease: "power1.inOut" });

            [ "#section-message", "#section-closing" ].forEach(id => {
                gsap.fromTo(`${id} .anim-target`, 
                    { opacity: 0, y: 60 },
                    {
                        scrollTrigger: { 
                            trigger: id, 
                            start: "top 65%", 
                            end: "top 20%", 
                            toggleActions: "play none none reverse" 
                        },
                        opacity: 1, y: 0, duration: 1.8, ease: "power3.out"
                    }
                );
            });
        };

        window.addEventListener('DOMContentLoaded', () => {
            initSnowSystem();
            initGSAP();
        });

    </script>
</body>
</html>
